{% extends "base.html" %} {% load static %}{% block title %} Home {% endblock %} 
{% block content %}



<div class="flex flex-col items-center">
    <h1 class="text-myBlue font-mainFont text-4xl center mb-4">{{ ship.shipname }}</h1>
    <h2 class= "text-myOrange font-mainFont">Ship's details </h2>
    <table id="shipinfo" class="font-mainFont w-[50vw] border text-center">
        <th class="">
            <tr class="text-lg bg-slate-300">
                <td class="p-3">Name</td>
                <td class="p-3">IMO-nr</td>
                <td class="p-3">Length</td>
                <td class="p-3">Width</td>
                <td class="p-3">Max Draft</td>
            </tr>
        </th>
        <tbody>
            <tr>
                <td class="p-3">{{ ship.shipname }}</td>
                <td class="p-3">{{ ship.imo }}</td>
                <td class="p-3">{{ ship.max_length }}m</td>
                <td class="p-3">{{ ship.max_width }}m</td>
                <td class="p-3">{{ ship.max_draft }}m</td>
            </tr>
        </tbody>
    </table>

    <h2 class= "text-myOrange font-mainFont pt-5">Choose a visit to display the route </h2>
    <h2 id="chosenVisit" class= "text-myBlue font-mainFont pt-5">
      {% comment %} Visit id is dynamically added {% endcomment %}
    </h2>

    <div id="mapVisits" class="responsiveMap border rounded-md p-5"></div>

    <h2 class= "text-myOrange font-mainFont pt-5">Ship's visits </h2>
   <table id="shipVisits" class="font-mainFont w-[50vw] border text-center flex-shrink">
        <th class="">
            <tr class="text-lg bg-slate-300">
                <td class="p-3">Visit</td>
                <td class="p-3">Journey</td>
                <td class="p-3">Routecategory</td>
                <td class="p-3">Date docked
                  
                </td>
            </tr>
            <tr>
              <td colspan="4" class="text-right">
                <button id="toggleTableBody" onclick='toggleTableBody()'>â†“</button>
              </td>
            </tr>
        </th>
        <tbody id="visitsTableBody">
          {% for visit in visits %}
            <tr>
                <td class="p-3">
                  <a href="#"
                      class="visit-link  hover:underline hover:text-myGreen"
                      data-visit-id="{{ visit.visit }}"
                      data-ship-imo="{{ ship.imo }}"
                      data-route-id="{{ visit.routecategoryid}}">
                    {{ visit.visit }}
                  </a>
                </td>
                <td class="p-3">{{ visit.journey }}</td>
                <td class="p-3">{{ visit.routecategoryid__routecategoryname }}</td>
                <td class="p-3">{{ visit.dockeddt }}</td>
            </tr>  
            {% endfor %}
        </tbody>
    </table>
  



    

    <div id="markerList" class="flex flex-col items-center">  
      {% comment %} Markers are dynamically added {% endcomment %}
    </div>


    <script src="{% static 'SeaYou_Scripts/Leaflet.Polyline.SnakeAnim.js' %}"></script>
    <script src="{% static 'SeaYou_Scripts/VisitRouteMapScript.js' %}"></script>
    
</div>




{%endblock%}